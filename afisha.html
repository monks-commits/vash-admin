<!DOCTYPE html>
<html lang="uk"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Афіша</title><link rel="stylesheet" href="styles.css"></head>
<body><header class="header"><h1>Афіша — Листопад 2025</h1><nav class="nav"><a href="index.html">Головна</a><a href="theatres.html">Театри</a></nav></header>
<div class="container"><div id="filter" class="meta"></div><div id="grid" class="grid"></div></div>
<script>
const params = new URLSearchParams(location.search);
const theatreFilter = params.get('theatre');
document.getElementById('filter').textContent = theatreFilter ? ('Фільтр: ' + theatreFilter) : 'Усі театри';
const stageName = s => s==='big'?'Велика сцена':(s==='small'?'Мала сцена':'');
fetch('data/schedule/2025-11.json').then(r=>r.json()).then(items=>{
  const grid = document.getElementById('grid');
  items.filter(x => !theatreFilter || x.theatre === theatreFilter).forEach(ev => {
    const card = document.createElement('div'); card.className='card';
    const img = document.createElement('img'); img.src = ev.poster || 'images/posters/' + ev.theatre + '/' + ev.show + '.jpg'; img.alt = ev.show_title || ev.show; card.appendChild(img);
    const h3 = document.createElement('h3'); h3.textContent = ev.show_title || ev.show; 
    if (ev.stage) { const b=document.createElement('span'); b.className='badge'; b.textContent=stageName(ev.stage); h3.appendChild(b); }
    card.appendChild(h3);
    const p = document.createElement('p'); p.className='meta'; p.textContent = (ev.date||'') + (ev.time?(' • '+ev.time):'') + (ev.venue?(' • '+ev.venue):''); card.appendChild(p);
    const actions = document.createElement('div');
    const a1 = document.createElement('a'); a1.className='btn secondary'; a1.textContent='Детальніше'; a1.href='spectacles/show.html?show=' + ev.theatre + '/' + ev.show;
    const a2 = document.createElement('a'); a2.className='btn'; a2.style.marginLeft='8px'; a2.textContent='Вибрати місця'; a2.href='spectacles/hall.html?show=' + ev.theatre + '/' + ev.show;
    actions.appendChild(a1); actions.appendChild(a2); card.appendChild(actions); grid.appendChild(card);
  });
}).catch(err=>{document.getElementById('grid').textContent='Не вдалося завантажити афішу.'; console.error(err);});
</script></body></html>